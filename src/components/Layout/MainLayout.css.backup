/* ğŸ¨ Main Layout Styles - Responsive & Flexible */
.main-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
  width: 100vw;
  max-width: 100vw; /* âœ… Prevent horizontal overflow */
  position: relative;
  background-color: var(--bg-primary, #f8f9fa);
  box-sizing: border-box; /* âœ… Include borders in width */
}

/* ğŸ¯ Sidebar - Fixed width */
.main-layout__sidebar {
  flex-shrink: 0;
  width: 60px;
  height: 100vh; /* âœ… Full viewport height */
  background-color: var(--sidebar-bg, #2c3e50);
  border-right: 1px solid var(--border-color, #e1e5e9);
  z-index: 100;
}

/* ğŸ“‹ Left Panel - Wider for better UX */
.main-layout__left-panel {
  flex-shrink: 0;
  width: 380px; /* Fixed width */
  height: 100vh; /* âœ… Full viewport height */
  background-color: var(--panel-bg, #ffffff);
  border-right: 1px solid var(--border-color, #e1e5e9);
  overflow: hidden; /* âœ… Prevent overflow */
  z-index: 90;
  display: flex; /* âœ… Flex container */
  flex-direction: column; /* âœ… Stack children */
}

/* ğŸ’¬ Main Content - Flexible */
.main-layout__main-content {
  flex: 1;
  height: 100vh; /* âœ… Full viewport height */
  background-color: var(--content-bg, #ffffff);
  overflow: hidden;
  position: relative;
  min-width: 0; /* Prevent flex item from overflowing */
  display: flex; /* âœ… Ensure child takes full space */
  flex-direction: column; /* âœ… Stack children vertically */
}

/* â„¹ï¸ Info Panel - Conditional & Animated */
.main-layout__info-panel {
  flex-shrink: 0;
  width: 0;
  height: 100vh; /* âœ… Full viewport height */
  overflow: hidden;
  background-color: var(--panel-bg, #ffffff);
  border-left: 1px solid var(--border-color, #e1e5e9);
  transition: width 0.3s ease-in-out;
  z-index: 80;
  display: flex; /* âœ… Flex container */
  flex-direction: column; /* âœ… Stack content vertically */
}

.main-layout__info-panel.open {
  width: 350px; /* Increased for better content display */
}

/* ï¿½ï¸ Large Desktop - Reduce panel width if screen too small */
@media (max-width: 1024px) {
  .main-layout__left-panel {
    width: 320px; /* âœ… Smaller on medium screens */
  }
  
  .main-layout__info-panel.open {
    width: 300px; /* âœ… Smaller info panel */
  }
}

/* ï¿½ğŸ“± Mobile Responsive */
@media (max-width: 768px) {
  .main-layout {
    flex-direction: column;
  }

  .main-layout__sidebar {
    width: 100%;
    height: 60px;
    order: 3; /* Move to bottom */
  }

  .main-layout__left-panel {
    width: 100%;
    height: 250px; /* Increased from 200px */
    order: 1;
    border-right: none;
    border-bottom: 1px solid var(--border-color, #e1e5e9);
  }

  .main-layout__main-content {
    flex: 1;
    order: 2;
    min-height: 0;
  }

  .main-layout__info-panel {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    width: 0;
    z-index: 200;
    box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
  }

  .main-layout__info-panel.open {
    width: 80%;
  }
}

/* ğŸ“± Small screens */
@media (max-width: 480px) {
  .main-layout__left-panel {
    height: 200px; /* Increased from 150px */
  }

  .main-layout__info-panel.open {
    width: 95%; /* Increased from 90% */
  }
}

/* ğŸ–±ï¸ Very small screens - Force stacked layout */
@media (max-width: 900px) and (min-width: 769px) {
  .main-layout__left-panel {
    width: 300px; /* âœ… Smaller to fit screen */
  }
  
  .main-layout__info-panel.open {
    width: 280px; /* âœ… Smaller info panel */
  }
}

/* ğŸ¨ CSS Variables for theming */
:root {
  --bg-primary: #f8f9fa;
  --panel-bg: #ffffff;
  --content-bg: #ffffff;
  --sidebar-bg: #2c3e50;
  --border-color: #e1e5e9;
}

/* Dark theme */
[data-theme="dark"] {
  --bg-primary: #1a1a1a;
  --panel-bg: #2d2d2d;
  --content-bg: #1e1e1e;
  --sidebar-bg: #0d1117;
  --border-color: #30363d;
}

/* ğŸ”§ Layout variants */
.main-layout--chat {
  background-color: var(--bg-primary, #f8f9fa);
}

.main-layout--friends {
  background-color: var(--bg-primary, #f8f9fa);
}

/* âš¡ Performance optimizations */
.main-layout__left-panel,
.main-layout__main-content,
.main-layout__info-panel {
  will-change: width;
  contain: layout style paint;
}